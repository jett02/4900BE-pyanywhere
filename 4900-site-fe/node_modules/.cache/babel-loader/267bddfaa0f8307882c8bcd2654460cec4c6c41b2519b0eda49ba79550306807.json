{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '../router';\nimport { APIService } from \"../http/APIService\";\nconst apiService = new APIService();\nexport default {\n  name: \"Auth\",\n  data: () => ({\n    credentials: {},\n    valid: true,\n    showMsg: \"\",\n    loading: false,\n    rules: {\n      username: [v => !!v || \"Username is required\", v => v && v.length > 3 || \"A username must be more than 3 characters long\", v => /^[a-z0-9_]+$/.test(v) || \"A username can only contain letters and digits\"],\n      password: [v => !!v || \"Password is required\", v => v && v.length > 7 || \"The password must be longer than 7 characters\"]\n    },\n    showPassword: false\n  }),\n  methods: {\n    login() {\n      localStorage.clear();\n      localStorage.setItem(\"isAuthenticated\", false);\n      apiService.authenticateLogin(this.credentials).then(response => {\n        const access = response.data.access;\n        const refresh = response.data.refresh;\n        localStorage.setItem(\"access\", access);\n        localStorage.setItem(\"refresh\", refresh);\n        localStorage.setItem(\"isAuthenticated\", true);\n        localStorage.setItem(\"log_user\", JSON.stringify(this.credentials.username));\n        window.location = \"/\";\n      }).catch(error => {\n        if (error.message === \"Network Error\") {\n          // Verify CORS middleware installed in server settings\n          this.showMsg = \"axiosError\";\n        } else if (error.response.status === 401) {\n          // \"not authorized\"\n          this.showMsg = \"loginError\";\n          router.push(\"/auth\");\n        } else if (error.response.status === 400) {\n          //\"bad request\"\n          this.showMsg = \"loginError\";\n        } else {\n          this.showMsg = \"axiosError\";\n          router.push(\"/auth\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["router","APIService","apiService","name","data","credentials","valid","showMsg","loading","rules","username","v","length","test","password","showPassword","methods","login","localStorage","clear","setItem","authenticateLogin","then","response","access","refresh","JSON","stringify","window","location","catch","error","message","status","push"],"sources":["C:\\Users\\jphus\\PycharmProjects\\4900-Site-BE\\4900-site-fe\\src\\components\\Auth.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n    <div class=\"row align-items-center justify-content-center\">\r\n      <div class=\"col-12 col-sm-6 col-md-4 col-lg-4\">\r\n        <div class=\"card mx-auto shadow\">\r\n          <div class=\"card-body\">\r\n            <div class=\"card-title\"><span>Login</span></div>\r\n            <div\r\n              v-if=\"showMsg === 'loginError'\"\r\n              close-icon=\"mdi-close-circle\"\r\n              :value=\"true\"\r\n              class=\"alert alert-danger\"\r\n              role=\"alert\"\r\n              dense\r\n            >\r\n              Invalid username or password. Please Try again.\r\n            </div>\r\n            <div\r\n              v-else-if=\"showMsg === 'axiosError'\"\r\n              close-icon=\"mdi-close-circle\"\r\n              :value=\"true\"\r\n              class=\"alert alert-danger\"\r\n              role=\"alert\"\r\n              dense\r\n            >\r\n              Access blocked by server. Check server.\r\n            </div>\r\n            <div class=\"card-text pt-2\">\r\n              <div class=\"col-md-10 mb-3\">\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text\">@</span>\r\n                  </div>\r\n                  <input\r\n                    v-model=\"credentials.username\"\r\n                    :counter=\"70\"\r\n                    label=\"Username\"\r\n                    :rules=\"rules.username\"\r\n                    maxlength=\"70\"\r\n                    required\r\n                    type=\"text\"\r\n                    class=\"form-control mb-3\"\r\n                    placeholder=\"Username\"\r\n                    aria-describedby=\"inputGroupPrepend2\"\r\n                  />\r\n                  <div class=\"w-100\"></div>\r\n                  <div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text\">***</span>\r\n                  </div>\r\n                  <input\r\n                    :type=\"showPassword ? 'text' : 'Password'\"\r\n                    v-model=\"credentials.password\"\r\n                    label=\"Password\"\r\n                    :rules=\"rules.password\"\r\n                    maxlength=\"20\"\r\n                    required\r\n                    :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\r\n                    @click:append=\"showPassword = ! showPassword\"\r\n                    class=\"form-control\"\r\n                    placeholder=\"Password\"\r\n                    aria-describedby=\"inputGroupPrepend2\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <button ref =\"form\" @click.prevent=\"login\" class=\"btn btn-primary\">Login</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import router from '../router';\r\n  import { APIService } from \"../http/APIService\";\r\n  const apiService = new APIService();\r\n  \r\n  export default {\r\n  name: \"Auth\",\r\n  data: () => ({\r\n      credentials: {},\r\n      valid: true,\r\n      showMsg: \"\",\r\n      loading: false,\r\n      rules: {\r\n        username: [\r\n          (v) => !!v || \"Username is required\",\r\n          (v) =>\r\n            (v && v.length > 3) ||\r\n            \"A username must be more than 3 characters long\",\r\n          (v) =>\r\n            /^[a-z0-9_]+$/.test(v) ||\r\n            \"A username can only contain letters and digits\",\r\n        ],\r\n        password: [\r\n          (v) => !!v || \"Password is required\",\r\n          (v) =>\r\n            (v && v.length > 7) ||\r\n            \"The password must be longer than 7 characters\",\r\n        ],\r\n      },\r\n      showPassword: false,\r\n    }),\r\n    methods: {\r\n      login(){\r\n            localStorage.clear();\r\n            localStorage.setItem(\"isAuthenticated\", false)\r\n  \r\n            apiService\r\n            .authenticateLogin(this.credentials)\r\n            .then((response) => {\r\n                const access = response.data.access\r\n                const refresh = response.data.refresh\r\n  \r\n                localStorage.setItem(\"access\", access)\r\n                localStorage.setItem(\"refresh\",refresh)\r\n                localStorage.setItem(\"isAuthenticated\", true)\r\n                localStorage.setItem(\"log_user\", JSON.stringify(this.credentials.username))\r\n        \r\n                window.location = \"/\";\r\n          }).catch(error => {\r\n          if (error.message ===\"Network Error\"){ // Verify CORS middleware installed in server settings\r\n            this.showMsg = \"axiosError\"\r\n          }else if (error.response.status === 401) { // \"not authorized\"\r\n              this.showMsg = \"loginError\";\r\n              router.push(\"/auth\");\r\n            }else if (error.response.status === 400) { //\"bad request\"\r\n              this.showMsg = \"loginError\";\r\n            }else{\r\n              this.showMsg = \"axiosError\";\r\n              router.push(\"/auth\");\r\n            }\r\n        });\r\n        }\r\n    }\r\n  }\r\n  </script>\r\n  "],"mappings":";AA0EE,OAAOA,MAAK,MAAO,WAAW;AAC9B,SAASC,UAAS,QAAS,oBAAoB;AAC/C,MAAMC,UAAS,GAAI,IAAID,UAAU,CAAC,CAAC;AAEnC,eAAe;EACfE,IAAI,EAAE,MAAM;EACZC,IAAI,EAAEA,CAAA,MAAO;IACTC,WAAW,EAAE,CAAC,CAAC;IACfC,KAAK,EAAE,IAAI;IACXC,OAAO,EAAE,EAAE;IACXC,OAAO,EAAE,KAAK;IACdC,KAAK,EAAE;MACLC,QAAQ,EAAE,CACPC,CAAC,IAAK,CAAC,CAACA,CAAA,IAAK,sBAAsB,EACnCA,CAAC,IACCA,CAAA,IAAKA,CAAC,CAACC,MAAK,GAAI,CAAC,IAClB,gDAAgD,EACjDD,CAAC,IACA,cAAc,CAACE,IAAI,CAACF,CAAC,KACrB,gDAAgD,CACnD;MACDG,QAAQ,EAAE,CACPH,CAAC,IAAK,CAAC,CAACA,CAAA,IAAK,sBAAsB,EACnCA,CAAC,IACCA,CAAA,IAAKA,CAAC,CAACC,MAAK,GAAI,CAAC,IAClB,+CAA+C;IAErD,CAAC;IACDG,YAAY,EAAE;EAChB,CAAC,CAAC;EACFC,OAAO,EAAE;IACPC,KAAKA,CAAA,EAAE;MACDC,YAAY,CAACC,KAAK,CAAC,CAAC;MACpBD,YAAY,CAACE,OAAO,CAAC,iBAAiB,EAAE,KAAK;MAE7ClB,UAAS,CACRmB,iBAAiB,CAAC,IAAI,CAAChB,WAAW,EAClCiB,IAAI,CAAEC,QAAQ,IAAK;QAChB,MAAMC,MAAK,GAAID,QAAQ,CAACnB,IAAI,CAACoB,MAAK;QAClC,MAAMC,OAAM,GAAIF,QAAQ,CAACnB,IAAI,CAACqB,OAAM;QAEpCP,YAAY,CAACE,OAAO,CAAC,QAAQ,EAAEI,MAAM;QACrCN,YAAY,CAACE,OAAO,CAAC,SAAS,EAACK,OAAO;QACtCP,YAAY,CAACE,OAAO,CAAC,iBAAiB,EAAE,IAAI;QAC5CF,YAAY,CAACE,OAAO,CAAC,UAAU,EAAEM,IAAI,CAACC,SAAS,CAAC,IAAI,CAACtB,WAAW,CAACK,QAAQ,CAAC;QAE1EkB,MAAM,CAACC,QAAO,GAAI,GAAG;MAC3B,CAAC,CAAC,CAACC,KAAK,CAACC,KAAI,IAAK;QAClB,IAAIA,KAAK,CAACC,OAAM,KAAK,eAAe,EAAC;UAAE;UACrC,IAAI,CAACzB,OAAM,GAAI,YAAW;QAC5B,CAAC,MAAK,IAAIwB,KAAK,CAACR,QAAQ,CAACU,MAAK,KAAM,GAAG,EAAE;UAAE;UACvC,IAAI,CAAC1B,OAAM,GAAI,YAAY;UAC3BP,MAAM,CAACkC,IAAI,CAAC,OAAO,CAAC;QACtB,CAAC,MAAK,IAAIH,KAAK,CAACR,QAAQ,CAACU,MAAK,KAAM,GAAG,EAAE;UAAE;UACzC,IAAI,CAAC1B,OAAM,GAAI,YAAY;QAC7B,CAAC,MAAI;UACH,IAAI,CAACA,OAAM,GAAI,YAAY;UAC3BP,MAAM,CAACkC,IAAI,CAAC,OAAO,CAAC;QACtB;MACJ,CAAC,CAAC;IACF;EACJ;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}